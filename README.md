# danime-niconico-data

dアニメストア ニコニコ支店をもっと便利にするサービスを有志で作るために、関連データをこのリポジトリで勝手に集計しています。

## 用語

- ニコニコ支店
  - dアニメストア ニコニコ支店 (<https://site.nicovideo.jp/danime/>)
- チャンネル
  - 基本的にはニコニコチャンネルの、さらに基本的に「株式会社ドワンゴ」運営になっているアニメを作品ごとに販売しているチャンネル
  - 例: https://ch.nicovideo.jp/kinmosa など
- コメント引用
  - ニコニコ支店側の動画を開いた時に、チャンネル側の動画コメントが引用される機能のこと
  - https://blog.nicovideo.jp/niconews/73078.html
  - https://twitter.com/nico_nico_talk/status/997031909023596545
  - コメント引用元→チャンネルの動画、コメント引用先→ニコニコ支店の動画

## ファイル解説

- `sqlite-to-csv.py`: `csv/*` から `data.sqlite3` を作る。これがないと始まらないが `data.sqlite3` を消し飛ばすので SQLite 側にしかないデータがある場合は注意
- `dump-series.py`: ニコニコ支店のシリーズを取得する。シリーズ内の動画数に変化がない場合の再取得はしないので注意
- `dump-shiten-ids-from-snapshot.py`: スナップショット検索APIからニコニコ支店の動画一覧を取得する (コメント引用元の動画情報取得はこれでは行わない、というかコメント引用周りは未実装)
- `csv-to-sqlite.py`: `data.sqlite3` から git にコミットする用の CSV ファイルを吐く

## TODO

- コメント引用の関係情報を取得する
  - https://scrapbox.io/rinsuki/d%E3%82%A2%E3%83%8B%E3%83%A1%E3%82%B9%E3%83%88%E3%82%A2_%E3%83%8B%E3%82%B3%E3%83%8B%E3%82%B3%E6%94%AF%E5%BA%97%E3%81%A8%E3%83%8B%E3%82%B3%E3%83%8B%E3%82%B3%E3%83%81%E3%83%A3%E3%83%B3%E3%83%8D%E3%83%AB%E3%81%AE%E5%8B%95%E7%94%BB%E3%82%92%E8%A1%8C%E3%81%8D%E6%9D%A5%E3%81%97%E3%81%9F%E3%81%84
  - 一件ごとなら取得できるが複数取得をしたほうが双方にやさしい
  - が、できるか…？
  - 引用元になりそうなチャンネル動画を自前で探してきて、事前に再生時間等を調査して引用の条件を満たすかチェックというのはありかも
    - ………だるい
  - 適当に1話・真ん中らへん・最後らへん で引いて引用されてそうだったら全話引くとAPIのコール数を節約できる？

## ライセンス

ここにあるデータ (`csv/*/*.csv`) は全てニコニコ動画から取ったものなので、ニコニコに怒られなさそうな範囲であれば勝手に使ってください。

私の権利分(コードとか)は MIT License でお願いします。